<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | -1.9517320122461623</title><meta name=keywords content><meta name=description content="Posts - -1.9517320122461623"><meta name=author content="Me"><link rel=canonical href=https://467tn.com/post/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.447f4924d3ebf89bcf25c7e77c905cb2ee6ea803dacb2c3621646ef4f50d1f86.css integrity="sha256-RH9JJNPr+JvPJcfnfJBcsu5uqAPayyw2IWRu9PUNH4Y=" rel="preload stylesheet" as=style><link rel=icon href=https://github.com/srn221B/srn221B.github.io/assets/60976262/00ebf8b5-eceb-4f87-8e70-df54f431a9b8><link rel=icon type=image/png sizes=16x16 href=https://github.com/srn221B/srn221B.github.io/assets/60976262/00ebf8b5-eceb-4f87-8e70-df54f431a9b8><link rel=icon type=image/png sizes=32x32 href=https://github.com/srn221B/srn221B.github.io/assets/60976262/00ebf8b5-eceb-4f87-8e70-df54f431a9b8><link rel=apple-touch-icon href=https://user-images.githubusercontent.com/60976262/190914441-404cb19b-540f-4178-a89d-8f89ab1e187c.png><link rel=mask-icon href=https://user-images.githubusercontent.com/60976262/190914441-404cb19b-540f-4178-a89d-8f89ab1e187c.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://467tn.com/post/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Posts"><meta property="og:description" content="blog"><meta property="og:type" content="website"><meta property="og:url" content="https://467tn.com/post/"><meta property="og:image" content="https://467tn.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="467"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://467tn.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Posts"><meta name=twitter:description content="blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://467tn.com/post/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://467tn.com accesskey=h title="  (Alt + H)"><img src=https://467tn.com/home2.png alt aria-label=logo height=35></a><div class=logo-switches></div></div><ul id=menu><li><a href=https://467tn.com/ title=whoami><span>whoami</span></a></li><li><a href=https://467tn.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://467tn.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://filmarks.com/users/467 title=🎥filmarks><span>🎥filmarks</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://booklog.jp/users/467 title=📚booklog><span>📚booklog</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://zenn.dev/467 title=🗒zenn><span>🗒zenn</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://s6n.hatenablog.com/ title=🛫travels><span>🛫travels</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://467tn.com>Home</a></div><h1>Posts
<a href=index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><header class=entry-header><h2>GreatExpectations(v0)のProfilingとDataAsistantの特長</h2></header><div class=entry-content><p>GreatExpectations(v0)のProfilingとDataAsistantの特長 GreatExpectations(v0)のデータプロファイリング機能の特長についてまとめます。
しかし昨年v1がリリースされ、従来(v0)のProfilingは将来的に使われなくなるようなので、ご参考程度にどうぞ。
https://docs.greatexpectations.io/docs/reference/learn/migration_guide/?expectation_config=v1_expectation_suite_config&expectation_suite_api=v1_expectation_suite_api&snowflake_config=v0_snowflake_config&data_context_config=v0_data_context_config&checkpoints_yaml=v1_checkpoints_yaml
「profilers: This feature has been removed in V1. Some form of profilers will be re-introduced in V1 at a later date.」
GreatExpectations(v0)のProfilerの特長 GreatExpectationsではProfilerを利用しdata profilingをする。
主にサポートしているProfilerは次の3つである。
どのProfilerもprofiling結果はExpectation Suite(データの期待の集まり)を返す。
User Configurable Profiler 基本的なdata pofilingをしてくれる、Profiler。
対応データ テーブル自体 カラム 文字列 datetime 数値 data profiling可能なExpectation こちらのDocの末尾を参照 また「semantic_types」を利用することで、それぞれのカラムの型に合ったdata profilingへ分岐し実施することができる。
実行の仕方 過去の記事を参考に https://467tn.com/post/content6/#profilingprofiler%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97profiling%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B
JsonSchemaProfiler Jsonのスキーマ専用のdata profilingをしてくれる、Profiler。 ただ、ネストレベルの走査はしない。プロファイリングの内容は「User Configurable Profiler」と同じような内容をしている。
Rule-Based Profiler WARN：実験的な機能...</p></div><footer class=entry-footer><span title="2025-02-10 11:30:03 +0000 +0000">February 10, 2025</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to GreatExpectations(v0)のProfilingとDataAsistantの特長" href=https://467tn.com/post/content16/></a></article><article class=post-entry><header class=entry-header><h2>データプロファイリングについて</h2></header><div class=entry-content><p>データプロファイリングについて データプロファイリングとは何かを理解するために、What is data profiling?を自分なりに解釈して書きました。
データプロファイリングとは データプロファイリングとは、データセットの特性を分析し、データの内容や関係性を理解するためのものである。 データを適切に活用するために必要な情報を特定し、測定する。
何に使われるのか データプロファリングは、ビジネス分析・データサイエンス・データ品質管理のベースとして使用される。 主な目的は以下の通りである。
データの内容を確認し、管理しているデータと一致しているかを確認 データの品質を評価し、プロジェクトを進める準備が整っているかの判断 データの信頼性の向上 データの検索性の向上 マーケティング予測など、さまざまなプロジェクトでの活用 また、データが正しく見えるかをざっと確認するために利用することも、データプロファイリングの基礎的な形である。
データプロファイリングの種類 データプロファイリングの種類は多くあるが主に以下の３つのカテゴリに分類される。
データ構造 データの形式やメタ情報（データベース構造、ファイル形式、区切り文字、列名など）を分析する。 データ内容 データの意味のある値を調査し、完全性を把握する。 データ関係 データ内のフィールドや行の関係を分析する。 さまざまな比較 データマイニングとの関連性 データプロファイリング：データが何であるかを理解することを目指す データの現状を把握し、データが適切かどうかを評価する データマイニング：データプロファイリングの１つか２つ先の段階を目指す 現在のデータからパターンと傾向を特定し、それに基づいて行動する データプロファイリングはデータマイニングにとって非常に重要。データマイニングは典型的な「ゴミを入れればゴミが出る」シナリオであるからだ。データをプロファイリングしなければ、データマイニングの結果が信頼できるかどうかわからない。
データガバナンスとの関連性 データプロファイリングは、データガバナンス（データ管理・運用ルールの策定）を支援する役割を持つものであり、その逆ではない。 詳細：Data governance vs. data quality: where do they overlap?
データディスカバリとの関連性 データディスカバリ（データの発見や分析）を行うためには、データプロファイリングの結果が重要。
データアセスメント（データ評価・分析）との関連性 データプロファイリングは、データ品質分析の過程で行われる。
データアセスメント：主にデータソースレベルで実施 データ品質分析（またはデータ品質アセスメント）：組織全体のデータパイプラインや業務プロセス全体を対象に実施。 データプロファイリングの課題 相互運用性 データソースやETL、データマートへの反映など、データパイプラインの様々な段階でデータプロファイリングを実施する必要があるため、相互運用性のある設計が課題。...</p></div><footer class=entry-footer><span title="2025-02-10 11:30:03 +0000 +0000">February 10, 2025</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to データプロファイリングについて" href=https://467tn.com/post/content15/></a></article><article class=post-entry><header class=entry-header><h2>ワークフロー管理についてメモ</h2></header><div class=entry-content><p>WEB+DB PRESS plusの「ビッグデータを支える技術」という本の180ページから書かれているワークフロー管理について ワークフロー周りを開発している身としては忘れないようにしたい内容だと思ったので、備忘録として雑に残します。
ワークフロー管理 ワークフロー管理ツール 主な役割としては「定期的にタスクを実行すること」と「異常を検知してその解決を手助けすること」。 例えば以下のようなものがある
名称 種類 開発元 Airflow スクリプト型 Airbnb Azkaban 宣言型 Linkedin Digdag 宣言型 TreasureData Oozie 宣言型 The Apache Software Foundation Luigi スクリプト型 Spotify Prefect スクリプト型 Prefect Technologies Metaflow スクリプト型 Netflix Dagster スクリプト型 Dagster 基本機能とビッグデータで求められる機能 タスクを定期的なスケジュールで実行し、その結果を通知する タスク間の依存関係を定めて、決められた順にもれなく実行する タスクの実行結果を保持し、エラー発生時には再実行できるようにする 宣言型とスクリプト型 宣言型のメリット 最小限の記述でタスクを定義できる スクリプト型のメリット 柔軟性 ETLのプロセスにはスクリプト型のツール、SQLの実行には宣言型のツールをなどと使い分けるのも一つの方法。...</p></div><footer class=entry-footer><span title="2024-01-08 11:30:03 +0000 +0000">January 8, 2024</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to ワークフロー管理についてメモ" href=https://467tn.com/post/content14/></a></article><article class=post-entry><header class=entry-header><h2>Rayメモ</h2></header><div class=entry-content><p>Rayとは Rayとは機械学習を使ったpythonアプリケーションをスケーリングするためOSSフレームワーク。
以下の機能を提供する
データ前処理、分散トレーニング、調整、強化学習、モデル提供など一般的な機械学習タスクに必要なこと Pythonアプリケーションの分散処理 Kubernetesや各種クラウド製品を使ったスケーリング Rayのフレームワーク 以下の３つのレイヤで構成されている
RayAIRuntime:機械学習アプリケーションにて使うツールキット。 次の５つの分野がサポート揃っている。 Data:データの読み込み・変換・チューニング・予測 Train:学習 Tune:チューニング Serve:モデルの提供 RLib:他のtensorflow,torchなどのRayAIRuntime RayCore:分散処理できるようにする部分 RayCluster:スケールする部分 試してみる 「RayCluster」と「RayCore」を試してみる
「RayCluster」 前述通りPythonアプリケーションをスケールする部分。 ray.initを呼び出せばRayClusterを組まなくてもRayは動作するが、スケールしたい場合はClusterを組む必要がある。
どこで組めるのか RayClusterはAWS,GCP,Azureなどクラウド製品からKubernetes上でも組めるようにサポートされている。
RayClusterの構成 RayClusterは一つのHeadnodeといくつかのWorkernodeにて構成されている。
公式画像引用：https://docs.ray.io/en/latest/cluster/key-concepts.html
Headnodeは受け取ったワークロードリソース要求がクラスタの現在の容量を超えてるとWorkernodeを自動で増やし調整する。逆にWorkernodeがidle状態になるとWorkernodeを自動で削除する。
Kubernetesを利用したRayClusterの構成 Kubernetesを利用してRayClusterを構築しジョブを実行するには以下の３つの提供されているCRDを構成する必要がある。
RayCluster: Cluster本体 RayJob: Clusterジョブ RayService: Clusterサービス kind:RayJobを使わずRayServiceの指定のPortにray job submitをして、ジョブを実行することもできる。前者の場合kind:RayJobをDeployすると都度RayClusterが作られるが、後者はユーザ側でRayClusterを作り直さない限り一つのRayClusterを使い続けることになる。なので使い分けとしては常にRayJobと1:1でRayClusterをDeployしたい場合はkind:RayJobを使い、そうではない場合はRayServiceの指定のPortに都度ray job submitを使うという形で良さそう。
Kubernetesを利用してRayClusterを構築してみる 各種Operatorのインストールをする。
$ kubectl apply -k "github.com/ray-project/kuberay/ray-operator/config/default" namespaceray-system上で正常に動いていることを確認できる。
$ kubectl get all -n ray-system NAME READY STATUS RESTARTS AGE pod/kuberay-operator-79dd8d67db-skm94 1/1 Running 0 13s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kuberay-operator ClusterIP 10....</p></div><footer class=entry-footer><span title="2023-10-09 11:30:03 +0000 +0000">October 9, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Rayメモ" href=https://467tn.com/post/content13/></a></article><article class=post-entry><header class=entry-header><h2>デザイン変えました</h2></header><div class=entry-content><p>デザインというか配色を変えて最近本を読むのでブクログのリンクをヘッダーに追加したのみ。
このままのペースだと1年に一回デザインを変えることになるので他のPostも書いていきたいですね。
よく使用するカラーコード #3AA6B9 #164B60
うさぎ コスモスパイス、可愛い曲なので聴いてみてください。</p></div><footer class=entry-footer><span title="2023-08-12 11:30:03 +0000 +0000">August 12, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to デザイン変えました" href=https://467tn.com/post/content12/></a></article><article class=post-entry><header class=entry-header><h2>GreatExpectationsのActionについて</h2></header><div class=entry-content><p>Actionとは GreatExpectations(GX)で得たValidationResult(検証結果)を受け取った後に行う処理をする機能。
Actionの種類 例えば次のようなActionがある。
class名 できること SlackNotificationAction Slackへの通知 PagerdutyAlertAction PagerDutyへのEvent通知 MicrosoftTeamsNotificationAction Teamsへの通知 OpsgenieAlertAction OpsgenieへのAlert通知 EmailAction Emailの送付 StoreValidationResultAction ValidationStoreへ検証結果の保存 StoreEvaluationParametersAction ValidationStoreへ評価値の保存(Expectation SuiteのValidationResultsにあるEvaluationParameter) StoreMetricsAction MetricStoreへ検証結果のMetricの保存 UpdateDataDocsAction DataDocの更新 SNSNotificationAction AmazonSNSへの通知 また、ValidationActionClassを継承し_run メソッドを上書きすればカスタマイズした独自のActionを追加することもできる。
使い方について 複数のBatchRequestを検証するCheckPointにActionは構成される。そのため、使用する際はdata_contextへadd_checkpointを用いてCheckPointを追加するとき、もしくはdata_contextへrun_checkpointを用いてCheckPointを実際に実行するときに、Actionを定義する。
例えば「data_contextへadd_checkpointを用いてCheckPointを追加するとき」のActionの定義の仕方は次のように行う。
yaml_config = """ ・・・ validations: - expectation_suite_name: users.warning - expectation_suite_name: users....</p></div><footer class=entry-footer><span title="2023-05-07 11:30:03 +0000 +0000">May 7, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to GreatExpectationsのActionについて" href=https://467tn.com/post/content11/></a></article><article class=post-entry><header class=entry-header><h2>キーボード自作</h2></header><div class=entry-content><p>概要 初めて自作キーボードをしたのでその記録
なんで自作にしたの? 使っているキーボードのキーキャップを掃除していたらDeleteキーのはめ口が壊れてしまったのと、分割キーボードを使ったら辛い肩こりが少しは軽減されるのでは。。？と思ったのがきっかけです。ただネットで分割キーボードを探していたのですがいまいち自分好みのものがなく。。いっそのこと0->1で作ってしまおうと思い自作に至りました。
どうやって作ったの? 資材の準備->組み立て
資材の準備 デザイン&&配列を重視して揃えました。 デザインは、「ピンク×ゴールド×ブラック」で配色を整えました。キースイッチを黒色にする・ネジをゴールドにするなどもっとこだわってもよかったかもしれません。キー配列は、自分が慣れているのというのもありHHKBライクです。
あとは自分ははんだごて・はんだなどの組み立てる工具を持っていなかったので合わせて買いました。
以下は揃えた資材の画像です（事後画像もあり）
分類 内容 値段 基盤 Choco60 rev.2(ゴールド) 19,100 ケーブル TRRSケーブル 330 キースイッチ Gateronレッドメカニカルキースイッチ(赤軸)20ケセット 1,499×4 キーキャップ Akko Black&Pink 158-Key ASA Profile PBT 中古 4,000 はんだごて 白光(HAKKO) BLUE SET 電気器具/電気部品用はんだこてセット 815 はんだ吸取機 白光(HAKKO) はんだ吸取線 484 はんだ 白光(HAKKO) HEXSOL 巻はんだ 1,515 合計 32,240 キーキャップ、本当は同じ種類の155キーの方(B09L183QDM)をキーキャップのサイズが基盤とピッタリになりそうという理由から狙っていたのですが、調べていたら158キーの方の中古が安く売っていたのと、155キーの方は左側のキーに配色が黒と灰色に偏りそうだなあ（ピンク色が少なくなりそうだなあ）と思ったので、158キーの方にしました。...</p></div><footer class=entry-footer><span title="2023-04-09 11:30:03 +0000 +0000">April 9, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to キーボード自作" href=https://467tn.com/post/content10/></a></article><article class=post-entry><header class=entry-header><h2>Hadoop周辺の設定メモ</h2></header><div class=entry-content><p>hive関連 https://cwiki.apache.org/confluence/display/hive/configuration+properties参考 hive*から始まるプロパティはHiveのシステムプロパティとみなされる。なお「hive.conf.validation」でいじれる。 key default value about hive.tez.container.size -1 tezのコンテナを使うメモリサイズ hive.tez.auto.reducer.parallelism false reducerの並列有効化 hive.exec.reducers.bytes.per.reducer 256,000,000 1つのreducer辺りの処理サイズ hive.exec.dynamic.partition.mode stric dynamic partitionを使用するときのモード。stricの場合partitionをselectで明示的に指定しなければいけない。 hive.exec.compress.output false queryの最終結果を圧縮するかどうかを決める。圧縮方式は「mapred.output.compress*」から取得 mapreduce関連 https://software.fujitsu.com/jp/manual/manualfiles/m150005/j2ul1563/04z200/j1563-03-17-05-01.html mapred*はMRv1(org.apache.hadoop.mapred) mapreduceはMRv2(org.apache.hadoop.mapreduce) key default value about mapred.reduce.tasks -1 Hadoopジョブで使用するReduceタスク数 mapred.output.compression.codec Hadoopジョブの主力するファイルを圧縮するときのCodecのClass mapreduce....</p></div><footer class=entry-footer><span title="2023-02-11 11:30:03 +0000 +0000">February 11, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Hadoop周辺の設定メモ" href=https://467tn.com/post/content9/></a></article><article class=post-entry><header class=entry-header><h2>AirflowのPluginsについて</h2></header><div class=entry-content><p>AirflowPluginsとは Airflowをカスタマイズするために追加できるPlugin。
どんな時にAirflowPluginsを使うのか 例えば以下のようなときにAirflowPluginsを使う。
AirflowのメタデータのDBのコンテンツを表示するViewを作成したいとき。 指定された時間内において任意数のDAGが失敗時にAirflowの機能を監視しカスタムアラートを送信するアプリケーションを作成したいとき。 外部データツールのファイルやログに動的にリンクする詳細ビューをUIに表示したいとき。 新規Plugin作成方法 「plugins_folder」へPythonファイルを用意し、Pythonファイル内でairflow.plugins_manager.AirflowPluginを拡張するクラスを定義すれば新規Pluginを作成できる。
Pythonファイルの例 定義したAirflowPluginクラスには以下を実装する。 name:propertyにPlugin名 on_load:functionにPluginのロード時に実行してほしい処理 そのほかPluginに追加したいComponent(Pluginの機能)について列挙 from airflow.plugins_manager import AirflowPlugin class MyAirflowPlugin(AirflowPlugin): name = "empty" def on_load(cls, *args, **kwargs): pass # そのほかPluginに追加したいComponentについて列挙していく。 上記場合、Plugin名が「empty」であるPluginを作成している。
「plugins_folder」の確認の仕方 ちなみに「plugins_folder」はどこで確認できるのかというのだが、「コマンドを利用する」か「cfgファイルを見る」の2通りで確認できる。 基本的にデフォルトでは$AIRFLOW_HOME/pluginsになっているはず。 # コマンドを利用する $ airflow info | grep plugins_folder plugins_folder | xxx # cfgファイルを見る $ cat airflow.cfg | grep plugins_folder plugins_folder = xxxx Plugin確認方法 現在追加されているPluginは何か、Pluginに定義されてあるComponentは何かを確認する方法だが、「UIから確認する方法」と「CLIを利用して確認する方法」がある。WebServerを再起動しなくてもすぐに反映されるのは後者の方法。...</p></div><footer class=entry-footer><span title="2023-01-04 11:30:03 +0000 +0000">January 4, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to AirflowのPluginsについて" href=https://467tn.com/post/content8/></a></article><article class=post-entry><header class=entry-header><h2>AirflowのTaskFlowAPIについて</h2></header><div class=entry-content><p>TaskFlowAPIとは Airflow上でのWorkflowの書き方の一つ。従来Workflowの書き方は「DAGclassを定義し、Operator同士を繋げる書き方(Operatorを使用した書き方)」しかなかったが、Airflow2.0から新しい書き方が導入された。
基本的な書き方 DAGの書き方 @dagでWorkflowを定義する関数をdecorateする。グローバル変数にDAGを登録する必要がなくなった。
@dag( schedule=None, start_date=pendulum.datetime(2021, 1, 1, tz="UTC"), catchup=False, tags=["example"], ) def tutorial_taskflow_api(): """ DAG Docs Example """ tutorial_taskflow_apiがdag_id 関数配下に書いてある__doc__がDAGのDoc Taskの書き方(PythonOperatorの例) TaskFlowDecoratorでTaskの関数をdecorateする。
@task() def extract(): """ extract doc_md Example """ data_string = '{"1001": 301.27, "1002": 433.21, "1003": 502.22}' order_data_dict = json.loads(data_string) return order_data_dict extractがtask_id 関数配下に書いてある__doc__がTaskのDoc 対応しているOperator 上記PythonOperator以外にも以下のOperatorがTaskFlowDecoratorに対応している。主に独自の実行環境でPythonを実行する必要があるようなOperatorが現在は対応しているイメージ。
Operator TaskFlowDecorator PythonOperator @task(@task.python) PythonVirtualenvOperator @task.virtualenv BranchPythonOperator @task....</p></div><footer class=entry-footer><span title="2023-01-01 11:30:03 +0000 +0000">January 1, 2023</span>&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to AirflowのTaskFlowAPIについて" href=https://467tn.com/post/content7/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://467tn.com/post/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://467tn.com>-1.9517320122461623</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>